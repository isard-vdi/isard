version: '3.5'
services:
  isard-orchestrator:
    container_name: isard-orchestrator
    image: ${DOCKER_IMAGE_PREFIX}orchestrator:${DOCKER_IMAGE_TAG:-latest}
    logging:
      driver: "json-file"
      options:
        max-size: "100m"
        tag: "{{.ImageName}}|{{.Name}}|{{.ImageFullID}}|{{.FullID}}"
    networks:
      isard-network:
        ipv4_address: ${DOCKER_NET:-172.31.255}.30
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    environment:
      LOG_LEVEL:
      ORCHESTRATOR_LOG_LEVEL:

      ORCHESTRATOR_ORCHESTRATOR_POLLING_INTERVAL:
      ORCHESTRATOR_ORCHESTRATOR_OPERATIONS_TIMEOUT:
      ORCHESTRATOR_ORCHESTRATOR_OPERATIONS_ADDRESS:
      ORCHESTRATOR_ORCHESTRATOR_CHECK_ADDRESS:
      ORCHESTRATOR_ORCHESTRATOR_API_ADDRESS:
      API_ISARDVDI_SECRET:
      ORCHESTRATOR_ORCHESTRATOR_API_SECRET:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR:

      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_CPU:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_RAM:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_CPU_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_RAM_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_RAM_LIMIT_PERCENT:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_RAM_LIMIT_MARGIN:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MIN_RAM_LIMIT_MARGIN_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_CPU:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_RAM:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_CPU_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_RAM_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_RAM_LIMIT_PERCENT:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_RAM_LIMIT_MARGIN:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_MAX_RAM_LIMIT_MARGIN_HOURLY:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_HYPER_MIN_CPU:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_HYPER_MIN_RAM:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_HYPER_MAX_CPU:
      ORCHESTRATOR_ORCHESTRATOR_DIRECTOR_RATA_HYPER_MAX_RAM:

      ORCHESTRATOR_ORCHESTRATOR_CHECK_ENABLED:
      ORCHESTRATOR_ORCHESTRATOR_CHECK_TEMPLATE_ID:
      ORCHESTRATOR_ORCHESTRATOR_CHECK_FAIL_MAINTENANCE_MODE:
      ORCHESTRATOR_ORCHESTRATOR_CHECK_FAIL_SELF_SIGNED:

      INFRASTRUCTURE_DRY_RUN:
      ORCHESTRATOR_DRY_RUN:
